<!DOCTYPE html>
<html lang="en">

<head>
    <title></title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="resources/css/main.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="resources/javascript/functions.js"></script>
    <link href="resources/css/styling.css" rel="stylesheet">
</head>

<body>
    <!-- <input type="text" id="myVal">
    <input type="submit" id="myBtn" value="submit">
    <div id="data"></div> -->
    <div id="logoHeader">
        <div id="logo"><span id="C">C</span>ine Movies</div>

        <div id="header">
            <div class="headerList">
                <span onclick="aler()">About</span>
                <span onclick="aler()">API</span>
                <span onclick="aler()">More</span>
            </div>
            <div class="headerContact">
                <span onclick="aler()">Phone </span><span onclick="aler()"> Email</span>
            </div>
        </div>
    </div>
    <div id="searchDiv">
        <div class="searchContent">
            <div id="searchText">
                <p class="animate"">
                    <!-- <b>
                        Real Collection of <br />Great Movies</b> -->
                        <span class=" blast" style="opacity: 1;">R</span><span class="blast"
                        style="opacity: 1;">e</span><span class="blast" style="opacity: 1;">a</span><span class="blast"
                        style="opacity: 1;">l</span>
                    <span class="blast" style="opacity: 1;">C</span><span class="blast"
                        style="opacity: 1;">o</span><span class="blast" style="opacity: 1;">l</span><span class="blast"
                        style="opacity: 1;">l</span><span class="blast" style="opacity: 1;">e</span><span class="blast"
                        style="opacity: 1;">c</span><span class="blast" style="opacity: 1;">t</span><span class="blast"
                        style="opacity: 1;">i</span><span class="blast" style="opacity: 1;">o</span><span class="blast"
                        style="opacity: 1;">n</span>
                    <span class="blast" style="opacity: 1;">o</span><span class="blast" style="opacity: 1;">f</span>
                    <span class="blast" style="opacity: 1;">G</span><span class="blast"
                        style="opacity: 1;">r</span><span class="blast" style="opacity: 1;">e</span><span class="blast"
                        style="opacity: 1;">a</span><span class="blast" style="opacity: 1;">t</span>
                    <span class="blast" style="opacity: 1;">M</span><span class="blast"
                        style="opacity: 1;">o</span><span class="blast" style="opacity: 1;">v</span><span class="blast"
                        style="opacity: 1;">i</span><span class="blast" style="opacity: 1;">e</span><span class="blast"
                        style="opacity: 1;">s</span>
                </p>
                <p style=" font-size: 20px; text-shadow: 1px 1px 10px rgb(83, 81, 81);">Get all the information of your
                    favourite Movie<br />
                    at one place and with just one click.<br />
                    Available Ratings from all popular<br />
                    Platforms at same place.</p>
            </div><br />
            <label style="font-size: 15px; font-weight: bold;">‚¨á What Do you Want to Watch today? ‚¨á<br /></label>
            <input type="text" id="Text" placeholder="Movie Name" autocomplete="off" autofocus>
            <input type="submit" id="submitBtn" value="Search">
        </div>
        <link href="resources/css/loader.css" rel="stylesheet">
        <div id="loader1" style="position: absolute;">
            <div class="up">
                <div class="one"></div>
                <div class="two"></div>
            </div>
            <div class="down">
                <div class="three"></div>
                <div class="four"></div>
            </div>
        </div>
    </div>

    <div id="infoSection">
        <div class="cards cards1 ani">
            <p class="cardTitle">‚ãô Rating ‚ãò</p>
            <span style="display: flex;">
                <p class="cardText" id="rating" style="z-index: 1;">Lorem ipsum, dolor sit amet consectetur adipisicing
                    elit. Nisi voluptatem quo blanditiis, totam ullam facilis illum, corrupti veniam facere vel enim
                    animi rerum necessitatibus unde veritatis similique dignissimos, saepe asperiores id odit laborum
                    modi ex molestiae! Similique velit ratione ipsum repudiandae? Similique, dolorum alias? Impedit enim
                    vero ipsam nisi perferendis fugit cumque deleniti sit veniam necessitatibus libero rerum molestias
                    omnis quidem quae velit sed expedita, provident amet at consectetur obcaecati animi, tempore
                    eveniet? Iusto sed expedita consequatur quae porro asperiores laudantium, odio non suscipit. Veniam
                    explicabo aut sint numquam accusamus.</p>
                <div id="loader2" style="z-index: 2; position: absolute; margin-left: 55px;">
                    <div class="up">
                        <div class="one"></div>
                        <div class="two"></div>
                    </div>
                    <div class="down">
                        <div class="three"></div>
                        <div class="four"></div>
                    </div>
                </div>
            </span>
        </div>

        <link href="resources/css/slider.css" rel="stylesheet">
        <div id="slider">
            <div class="slide">
                <span class="image"><img id="img" src="#" width="267" height="400" /></span>
            </div>
            <div class="prevNext">
                <button id="prev">
                    ü°®</button>
                <button id="next">ü°™</button>
            </div>
        </div>

        <div class="cards cards2 ani">
            <p class="cardTitle">‚ãô Trailer ‚ãò</p>
            <span style="display: flex;">
                <div id="loader3" style="position: absolute; margin-left: 55px;">
                    <div class="up">
                        <div class="one"></div>
                        <div class="two"></div>
                    </div>
                    <div class="down">
                        <div class="three"></div>
                        <div class="four"></div>
                    </div>
                </div>
            </span>
                <iframe id="video" src="https://www.youtube.com/embed/Jvurpf91omw" title="Trailer" width="267px"
                    height="170px"></iframe>
                <p class="cardText" id="wiki">Get to know more about your favourite movie on WikiPedia</p>

                <a href="https://en.wikipedia.org/wiki/Inception" id="wikiLink" target="_blank">
                    <button class="wiki">
                        Lets Wiki
                        <span></span>
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                </a>
            

        </div>
    </div>
    <button id="showList">‚ñº</button>
    <div id="items"></div>

    <div id="footer">
        <div id="anshuman">
            <p>Made with <span style="color:red">‚ù§</span> by Anshuman Singh</p>
        </div>
        <div id="links">
            <p><a href="https://github.com/MrSingh2000" target="_blank"><img src="resources/images/github.png"
                        height="15px" width="15px">Github</a></p>
            <p><a href="https://www.linkedin.com/in/anshuman-singh-856991201" target="_blank"><img
                        src="resources/images/linkedin.png" height="15px" width="15px">LinkedIn</a></p>
        </div>
    </div>

    <script>
        $(document).ready(function () {
            // $("#infoSection").slideUp();
            // $("#loader1").hide();
            // $("#loader2").hide();
            // $("#loader3").hide();
        })
        if ($(window).width() < 769) {
            console.log($(window).width());
            let htmlData = `<link href="resources/css/mobile.css" rel="stylesheet">
            <article id="message">Please Use Desktop to Access!</article>`;
            $("body").html(htmlData);
        }

        const aler = () => {
            alert("The Route is not Set right now!");
        }
        var url = "https://imdb-api.com/en/API/Search/k_nfnf4b0w/";
        var str, l;
        var images, id;
        var ratingurl = "https://imdb-api.com/en/API/Ratings/k_nfnf4b0w/";
        var videourl = "https://imdb-api.com/en/API/YouTubeTrailer/k_nfnf4b0w/";
        var wikiurl = "https://imdb-api.com/en/API/Wikipedia/k_nfnf4b0w/";

        $("#submitBtn").click(function () {
            str = $("#Text").val();
            if (str == "") {
                alert("Input Field is Empty!");
                return;
            }
            $("#Text").val("");
            // alert("Step 1");
            getData();
        })

        const getData = () => {
            $("#loader1").show();
            $.get(url + str, function (data) {
                l = data.results.length;
                images = [l];
                id = [l];
                document.getElementById("items").innerHTML = "";
                for (let j = 0; j < l; j++) {
                    images[j] = data.results[j].image;
                    document.getElementById("items").innerHTML += `<img src="${data.results[j].image}" width="50" height="100"/>`;
                    id[j] = data.results[j].id;
                }

                $("#img").attr("src", images[0]);
                $("#infoSection").slideDown(3000);
                $("#loader1").hide();
                rating();
                video();
                link();

                $("#showList").css("display", "unset");
            })
                .fail(function () {
                    $("#loader1").hide();
                    alert("WebSite API Down!");
                })
        }
        var i = 0;
        $("#next").click(function () {
            i++;
            if (i == images.length) {
                i = 0;
            }
            $(".cards").fadeToggle(500);
            $(".cards").fadeToggle(500);
            $("#img").fadeToggle(1000, function () {
                $("#img").attr("src", images[i]);
                // $("#img").attr("width", "267");
                // $("#img").attr("height", "400");
            });
            $("#img").fadeToggle(1000);
            rating();
            video();
            link();
        })
        $("#prev").click(function () {
            i--;
            if (i < 0) {
                i = images.length - 1;
            }
            $(".cards").fadeToggle(500);
            $(".cards").fadeToggle(500);
            $("#img").fadeToggle(1000, function () {
                $("#img").attr("src", images[i]);
            });
            $("#img").fadeToggle(1000);

            rating();
            video();
            link();
        })

        $("#showList").click(function () {
            $("#items").toggle("3000");
            if ($("#showList").text() == "‚ñº") {
                $("#showList").text("‚ñ≤");
            }
            else {
                $("#showList").text("‚ñº");
            }
        })

        const rating = () => {
            let ratingBox = document.getElementById("rating");
            let currentId = id[i];
            $("#loader2").show();
            $.get(ratingurl + currentId, function (data) {
                let fullTitl = (data.fullTitle == null || data.fullTitle == "") ? "Not Found" : data.fullTitle + "‚≠ê";
                let yea = (data.year == null || data.year == "") ? "Not Found" : data.year + "‚≠ê";
                let imd = (data.imDb == null || data.imDb == "") ? "Not Found" : data.imDb + "‚≠ê";
                let meta = (data.metacritic == null || data.metacritic == "") ? "Not Found" : data.metacritic + "‚≠ê";
                let rotten = (data.rottenTomatoes == null || data.rottenTomatoes == "") ? "Not Found" : data.rottenTomatoes + "‚≠ê";
                let tv = (data.tV_com == null || data.tV_com == "") ? "Not Found" : data.tV_com + "‚≠ê";
                let moviedb = (data.theMovieDb == null || data.theMovieDb == "") ? "Not Found" : data.theMovieDb + "‚≠ê";
                let filmaff = (data.filmAffinity == null || data.filmAffinity == "") ? "Not Found" : data.filmAffinity + "‚≠ê";
                let rate;
                if (fullTitl == "Not Found" || yea == "Not Found") {
                    rate = `<h3>${data.errorMessage}</h3>`;
                }
                else {
                    rate = `<ul> 
                    <li>Title: <span class="ratingcss">${fullTitl}</span></li>
                    <li>Year: <span class="ratingcss">${yea}</span></li>
                    </ul>
                    <br />
                    <ul>
                    <li>imDb: <span class="ratingcss">${imd}</span></li>
                    <li>metacritic: <span class="ratingcss">${meta}</span></li>
                    <li>rottenTomatoes: <span class="ratingcss">${rotten}</span></li>
                    <li>TV com: <span class="ratingcss">${tv}</span></li>
                    <li>theMovieDb: <span class="ratingcss">${moviedb}</span></li>
                    <li>Film Affinity: <span class="ratingcss">${filmaff}</span></li>
                    </ul>`
                }
                ratingBox.innerHTML = rate;
                $("#loader2").hide();
            })
                .fail(function () {
                    alert("Rating API is Down");
                    $("#loader2").hide();
                })


        }

        // autoplay not added
        const video = () => {
            let v1 = "https://www.youtube.com/embed/";
            let v3 = "?autoplay=1&mute=1";
            let currentId = id[i];
            console.log(currentId);
            $("#loader3").show();
            $.get(videourl + currentId, function (data) {
                let v2 = data.videoId;
                $("#video").attr("src", v1 + v2);
            })
                .fail("Video/Wiki API is down");
            $("#loader3").hide();
        }

        const link = () => {
            let currentId = id[i];
            $.get(wikiurl + currentId, function (data) {
                let wikurl = data.url;
                // console.log(wikurl);
                $("#wikiLink").attr("href", wikurl);
            })
        }

    </script>
</body>

</html>